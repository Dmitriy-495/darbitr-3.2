# 🚀 DT ARBITR 3.2 - ПОЛНЫЙ МАНУАЛ (ТЕКУЩАЯ ВЕРСИЯ)

## 📋 ОСНОВНЫЕ ВОЗМОЖНОСТИ

- **Мониторинг цен** с бирж в реальном времени
- **Архитектура Apache/Nginx** - available/enabled конфиги
- **Memory-first подход** - максимальная производительность
- **Консольный интерфейс** - простой и эффективный

## 🏗️ АРХИТЕКТУРА СИСТЕМЫ

### 📁 СТРУКТУРА ПРОЕКТА

darbitr-3.2/
├── src/
│ ├── config/
│ │ ├── available/ # 🎯 ВСЕ ДОСТУПНЫЕ КОНФИГИ
│ │ │ ├── exchange/ # 🎯 БИРЖИ
│ │ │ │ ├── binance.json
│ │ │ │ ├── okx.json
│ │ │ │ ├── bybit.json
│ │ │ │ ├── kucoin.json
│ │ │ │ └── htx.json
│ │ │ └── active/ # 🎯 АКТИВЫ
│ │ │ ├── btcusdt.json
│ │ │ ├── ethusdt.json
│ │ │ ├── solusdt.json
│ │ │ ├── adausdt.json
│ │ │ └── dotusdt.json
│ │ ├── enabled/ # 🎯 АКТИВНЫЕ КОНФИГИ
│ │ │ ├── exchange/ # 🎯 АКТИВНЫЕ БИРЖИ
│ │ │ │ └── bybit.json -> ../../available/exchange/bybit.json
│ │ │ └── active/ # 🎯 АКТИВНЫЕ АКТИВЫ
│ │ │ └── btcusdt.json -> ../../available/active/btcusdt.json
│ │ └── loader.ts # 🎯 ЗАГРУЗЧИК КОНФИГОВ
│ ├── database/
│ │ ├── connection.ts # 🎯 ПОДКЛЮЧЕНИЕ К БАЗЕ
│ │ └── database.db # 🎯 БАЗА ДАННЫХ SQLite
│ ├── setup.ts # 🎯 НАСТРОЙКА ПЕРВОГО ЗАПУСКА
│ ├── main.ts # 🎯 ГЛАВНАЯ ЛОГИКА
│ └── index.ts # 🎯 ТОЧКА ВХОДА
├── package.json # 🎯 ЗАВИСИМОСТИ
├── tsconfig.json # 🎯 КОНФИГ TYPESCRIPT
└── .gitignore # 🎯 ИСКЛЮЧЕНИЯ GIT

## 🚀 БЫСТРЫЙ СТАРТ

### 1. УСТАНОВКА
```bash
git clone <repository>
cd darbitr-3.2
npm install
```



### 2. ЗАПУСК

bash

```
# Режим разработки (с авто-перезагрузкой)
npm run dev

# Продакшен режим
npm run build && npm start
```



### 3. РЕЗУЛЬТАТ

text

```
🚀 DT ARBITR 3.2 - Запуск...
🎯 Главный модуль запущен
📊 Мониторинг 1 пар на 1 биржах

♻️ Цикл 1 - 14:30:25

BTCUSDT:
  ByBit: $50123.45 (+0.82%)

♻️ Цикл 2 - 14:30:30

BTCUSDT:
  ByBit: $50201.33 (+1.12%)
```



## ⚙️ НАСТРОЙКА СИСТЕМЫ

### 🏦 ДОБАВЛЕНИЕ БИРЖИ

1. **Создайте файл конфигурации:**

bash

```
# Пример для новой биржи
cat > ./src/config/available/exchange/nexus.json << 'EOF'
{
  "name": "Nexus Exchange",
  "code": "nexus",
  "ws_url": "wss://nexus.com/ws",
  "rest_url": "https://api.nexus.com",
  "read_only": false,
  "weight": 9,
  "enabled": false
}
EOF
```



1. **Активируйте биржу:**

bash

```
ln -s ../../available/exchange/nexus.json ./src/config/enabled/exchange/nexus.json
```



### 💰 ДОБАВЛЕНИЕ АКТИВА

1. **Создайте файл конфигурации:**

bash

```
cat > ./src/config/available/active/ltcusdt.json << 'EOF'
{
  "symbol": "LTCUSDT",
  "base": "LTC",
  "quote": "USDT",
  "exchanges": ["binance", "okx", "bybit"],
  "volume_24h": 50000000,
  "volatility": 3.5,
  "base_price": 85.50,
  "min_profit": 0.9,
  "max_spread": 1.3
}
EOF
```



1. **Активируйте актив:**

bash

```
ln -s ../../available/active/ltcusdt.json ./src/config/enabled/active/ltcusdt.json
```



### 🔧 КОМАНДЫ ДЛЯ УПРАВЛЕНИЯ

bash

```
# Просмотр активных конфигов
ls -la ./src/config/enabled/exchange/
ls -la ./src/config/enabled/active/

# Деактивация биржи
rm ./src/config/enabled/exchange/bybit.json

# Деактивация актива
rm ./src/config/enabled/active/btcusdt.json
```



## 📊 СТРУКТУРА КОНФИГУРАЦИЙ

### 🏦 КОНФИГ БИРЖИ

json

```
{
  "name": "Binance",           // Название биржи
  "code": "binance",           // Уникальный код
  "ws_url": "wss://...",       // WebSocket endpoint
  "rest_url": "https://...",   // REST API endpoint
  "read_only": true,           // Только чтение (для Binance в РФ)
  "weight": 10,                // Вес для расчета цен (1-10)
  "enabled": false             // Статус активации
}
```



### 💰 КОНФИГ АКТИВА

json

```
{
  "symbol": "BTCUSDT",         // Торговый символ
  "base": "BTC",               // Базовая валюта
  "quote": "USDT",             // Котируемая валюта
  "exchanges": ["binance", "okx"], // Поддерживаемые биржи
  "volume_24h": 1500000000,    // Объем торгов за 24ч
  "volatility": 4.2,           // Волатильность в %
  "base_price": 50000,         // Базовая цена для эмуляции
  "min_profit": 0.8,           // Мин. прибыль для арбитража
  "max_spread": 1.2            // Макс. спред
}
```



## 🔄 ПРИНЦИП РАБОТЫ

### 1. **ЗАГРУЗКА КОНФИГОВ**

- Система читает только `enabled/` папки
- Использует симлинки на `available/` файлы
- Автоматическая валидация JSON

### 2. **ГЕНЕРАЦИЯ ЦЕН**

- Базовая цена берется из конфига актива
- Корректируется весом биржи и волатильностью
- Обновляется каждые 5 секунд

### 3. **АРБИТРАЖНАЯ ЛОГИКА**

- Сравнивает цены на разных биржах
- Ищет расхождения > 0.5%
- Формирует арбитражные сигналы

## 🛠️ ТЕХНИЧЕСКИЕ ДЕТАЛИ

### 📦 ЗАВИСИМОСТИ

json

```
{
  "sqlite3": "База данных SQLite",
  "typescript": "Типизированный JavaScript", 
  "tsx": "Запуск TypeScript без компиляции"
}
```



### ⚡ ПРОИЗВОДИТЕЛЬНОСТЬ

- **Memory-first** - данные в оперативной памяти
- **Минимальные I/O операции** - только чтение конфигов
- **Оптимизированные циклы** - 5 секунд между обновлениями

### 🔒 БЕЗОПАСНОСТЬ

- **Read-only режим** для Binance в РФ
- **Валидация конфигов** при загрузке
- **Обработка ошибок** на всех уровнях

## 🐛 ОТЛАДКА И ЛОГИ

### ЗАПУСК С ЛОГИРОВАНИЕМ

bash

```
npm run dev 2>&1 | tee arbitrage.log
```



### КЛЮЧЕВЫЕ СОБЫТИЯ

text

```
✅ - Успешная загрузка конфига
⚠️ - Предупреждение (битый конфиг)
❌ - Критическая ошибка
♻️ - Цикл мониторинга
📊 - Обновление цен
```



### ЧАСТЫЕ ПРОБЛЕМЫ

1. **Отсутствуют симлинки** - создать в `enabled/` папках
2. **Битые JSON файлы** - проверить синтаксис конфигов
3. **Нет доступа к БД** - проверить права на файл database.db

## 🔮 ПЛАНЫ РАЗВИТИЯ

### БЛИЖАЙШИЕ ЗАДАЧИ

- WebSocket сервер для клиентов
- Реальное подключение к биржам
- Арбитражная торговля
- Web-интерфейс

### ДОЛГОСРОЧНЫЕ ЦЕЛИ

- Машинное обучение для прогнозирования
- Мобильное приложение
- Кластерная архитектура

------

**🎯 ДЕВИЗ: "КОГДА МЫ ЕДИНЫ - БИРЖИ ПОБЕДИМЫ! СО СКОРОСТЬЮ СВЕТА!"**

**✅ ПОЛНЫЙ МАНУАЛ СОЗДАН!**

Теперь есть подробная документация по текущей версии системы с:
- 📁 Структурой проекта
- 🚀 Инструкциями по запуску  
- ⚙️ Настройке бирж и активов
- 🔧 Командам управления
- 🐛 Отладке проблем

Всё готово для работы! 🚀